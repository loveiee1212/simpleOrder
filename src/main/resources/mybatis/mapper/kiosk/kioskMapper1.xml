<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.team2.simpleOrder.dao.kiosk.IKioskDao1">
	<select id="getReviewList" parameterType="String"
		resultType="review">
		SELECT BD_DATE,OAC_NUM,RV_DATE,RV_TEXT,RV_SCORE
		FROM REVIEW
		WHERE C_CODE=#{c_code}
		ORDER BY RV_DATE DESC
	</select>
	<select id="getReviewImgList" parameterType="String"
		resultType="reviewImg">
		SELECT BD_DATE,OAC_NUM,RVIMG_SYSNAME
		FROM REVIEW_IMG
		WHERE
		C_CODE=#{c_code}
		ORDER BY OAC_NUM DESC
	</select>
	<select id="getRequestList" parameterType="String"
		resultType="String">
		SELECT RQ_KIND
		FROM REQUEST
		WHERE C_CODE=#{c_code}
		ORDER BY RQ_NUM;
	</select>
	<select id="getBillList" resultType="bill">
		SELECT PD.PD_NAME, PD_PRICE, OH.OH_CNT
		FROM ORDER_HISTORY AS OH JOIN ORDER_AND_CREDIT AS OAC JOIN PRODUCT AS PD
		WHERE OAC.C_CODE = #{c_code} AND OAC.BD_DATE = #{bd_date} AND OAC.OAC_NUM = #{oac_num}
		AND OAC.OAC_STATUS = '1' AND PD.PD_STATUS = '1'
		AND OAC.C_CODE = OH.C_CODE AND OAC.BD_DATE = OH.BD_DATE AND OAC.OAC_NUM = OH.OAC_NUM
		AND OH.PDC_CODE = PD.PDC_CODE AND OH.PD_CODE = PD.PD_CODE
	</select>
	<select id="getSkcList" resultType="hashmap">
		SELECT SKC_CODE,SKC_NAME,SKC_X,SKC_Y
		FROM SELLKEY_CT
		WHERE C_CODE=#{c_code}
		ORDER BY SKC_CODE ASC
	</select>
	<select id="getSellProList" resultType="sellProduct">
		SELECT SK.SKC_CODE,PRO.PDC_CODE,PRO.PD_CODE,PRO.PD_IMGNAME,PRO.PD_NAME,PRO.PD_PRICE
		FROM PRODUCT PRO LEFT OUTER JOIN SELLKEY SK
		ON PRO.PD_CODE=SK.PD_CODE AND PRO.PDC_CODE=SK.PDC_CODE
		WHERE PRO.C_CODE=#{c_code} AND PRO.PD_STATUS='1' AND SK_NUM IS NOT NULL
		ORDER BY PRO.PDC_CODE ASC,PRO.PD_CODE ASC
	</select>
</mapper>